# DEPENDENCY RESOLVER

### Запуск контейнеров
<Папка утилиты>/docker/start-script.sh

### Запуск контейнеров внутри контура
Не реализовано, не занесено. Можно запустить jar собрав самостоятельно или обратившись к автору.

###### Подробное описание в файле ADRs/ADR2-correction-main-principles.md

#### Подробности реализации для решения
1. Реализация вне контура безопасности.
2. Поставляться для использования в качестве образов _docker_ (**DependencyExplorer**
   распространяется вне контура, а **NexusExplorer** должен быть загружен в контур безопасности). Для
   **NexusExplorer** должен быть предусмотрен вариант поставки в виде `fat jar`.
3. В качестве входных и выходных данных используются файлы с определенными именами в заранее
   определенных локациях, которые будут маунтиться к контейнеру.

#### Рабочий процесс получения списка зависимостей для занесения артефактов
1. Отправить на внешний контур:
    1. Версию градла;
    2. Плагины и их версии;
    3. Список зависимостей необходимых для добавления;
    4. Список зависимостей зависимых от необъодимых для добавления зависимостей и от их зависимостей;
    5. Список зависимостей от которых зависят зависимости необходимые для добавления и их зависимости.
       ###### Примечание – Вместо этого можно отправить файлы _build.gradle_, _gradle-wrapper.properties_, _gradle-wrapper.jar_ c заменой зависимостей которые есть только внутри контура безопасности на их заивсимости. Также в таком варианте необходимо убрать все упоминания `Main` класса, отключить задачу `bootJar` и заменить ссылку на корпоративный nexus ссылкой на [дистрибутив gradle](https://services.gradle.org/distributions/) и указать необходимые репозитории вместо корпоративного nexus.
2. Создать проект _gradle_ (в каталоге который будет примонтирован к контейнеру) со всеми плагинами и зависимостями 
(для проекта с единым модулем это файлы _build.gradle_, _gradle-wrapper.properties_, _gradle-wrapper.jar_), запустить 
контейнер с **DependencyExplorer**, который выведет все скачанные для сборки urlы в сторонних репозиториях, в том
числе транзитивные и их родителей со своими зависимостями, полученными при сборке в контейнере.
3. Отправить зависимости во внутренний контур.
4. Запустить во внутреннем контуре **NexusExplorer**, который выдаст список отсутствующих в nexus
   зависимостей.
5. Дальше по существующим процессам.