# DEPENDENCY RESOLVER

### Запуск контейнеров
<Папка утилиты>/docker/start-script.sh

### Запуск контейнеров внутри контура
Не реализовано, не занесено. Можно запустить jar собрав самостоятельно или обратившись к автору.

###### Подробное описание в файле ADRs/ADR2-correction-main-principles.md

#### Подробности реализации для решения
1. Реализация вне контура безопасности.
2. Поставляться для использования в качестве образов _docker_ (**DependencyExplorer**
   распространяется вне контура, а **NexusExplorer** должен быть загружен в контур безопасности). Для
   **NexusExplorer** должен быть предусмотрен вариант поставки в виде fat jar.
3. В качестве входных и выходных данных используются файлы с определенными именами в заранее
   определенных локациях, которые будут маунтиться к контейнеру.

#### Рабочий процесс получения списка зависимостей для занесения артефактов
1. Отправить на внешний контур:
    1. Версию градла;
    2. Плагины и их версии;
    3. Список зависимостей необходимых для добавления;
    4. Список зависимостей зависимых от необъодимых для добавления зависимостей и от их зависимостей;
    5. Список зависимостей от которых зависят зависимости необходимые для добавления и их зависимости.
       ###### Примечание – Пункты iv и v допускается заменить файлом _build.gradle_ c заменой зависимостей которые есть только внутри контура безопасности на их заивсимости.
2. Создать проект _gradle_ со всеми плагинами и зависимостями, запустить задачу
   `build >> ./gradle.build.log`.
3. Скопировать файл _./gradle.build.log_ в необходимый каталог и запустить контейнер с
   **DependencyExplorer**, который выведет все скачанные для сборки urlы в сторонних репозиториях, в том
   числе транзитивные и их родителей со своими зависимостями, указанными в _./dgradle.build.log_.
4. Отправить зависимости во внутренний контур.
5. Запустить во внутреннем контуре **NexusExplorer**, который выдаст список отсутствующих в nexus
   зависимостей.
6. Дальше по существующим процессам.